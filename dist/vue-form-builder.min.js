import e from"vue";import t from"lodash/kebabCase";import r from"lodash/isArray";import o from"lodash/has";import a from"lodash/get";import n from"lodash/set";import i from"lodash/cloneDeep";import"core-js/modules/es.array.concat";import s from"lodash/forIn";import l from"lodash/isObject";function d(e,t,r,o,a,n,i,s,l,d){"boolean"!=typeof i&&(l=s,s=i,i=!1);var u,p="function"==typeof r?r.options:r;if(e&&e.render&&(p.render=e.render,p.staticRenderFns=e.staticRenderFns,p._compiled=!0,a&&(p.functional=!0)),o&&(p._scopeId=o),n?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(n)},p._ssrRegister=u):t&&(u=i?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),u)if(p.functional){var c=p.render;p.render=function(e,t){return u.call(t),c(e,t)}}else{var m=p.beforeCreate;p.beforeCreate=m?[].concat(m,u):[u]}return r}const u=e.extend({name:"FormGenerator",props:{id:{type:String,required:!0},model:{type:Object,required:!0},schema:{type:Array,required:!0},errors:{type:Object,default:()=>({})}},methods:{getFieldValue(e){return a(this.model,e.path)},getFieldErrors(e){return a(this.errors,e.path)},getFieldProps(e){const r=i(e.params),o=r.id||t(e.path);return r.id=`${this.id}-${o}`,r},onFieldUpdate(e,t){const r=i(this.model);n(r,e.path,t),this.$emit("update:model",r)}}});var p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-generator"},e._l(e.schema,(function(t,o){return r(t.type,e._b({key:o,tag:"component",staticClass:"form-generator__field",attrs:{value:e.getFieldValue(t),errors:e.getFieldErrors(t)},on:{"update:value":function(r){return e.onFieldUpdate(t,r)}}},"component",e.getFieldProps(t),!1))})),1)};p._withStripped=!0;const c=d({render:p,staticRenderFns:[]},void 0,u,"data-v-62863dd6",!1,void 0,!1,void 0,void 0,void 0);const m=e.extend({name:"FormGeneratorError",props:{errors:{type:Array,default:()=>[]}},computed:{firstError(){return this.errors[0]||null}}});var f=function(){var e=this.$createElement,t=this._self._c||e;return this.firstError?t("div",{staticClass:"form-generator-error"},[this._v("\n  "+this._s(this.firstError)+"\n")]):this._e()};f._withStripped=!0;const v=d({render:f,staticRenderFns:[]},void 0,m,"data-v-345167dd",!1,void 0,!1,void 0,void 0,void 0);const h=e.extend({name:"FormBuilder",components:{FormGenerator:c,FormGeneratorError:v},props:{model:{type:Object,required:!0},schema:{type:Array,required:!0},errors:{type:Object,default:()=>({})},id:{type:String,required:!0},autocomplete:{type:String,default:"on"},actionsAlign:{type:String,default:"right",validator:e=>["right","left","center"].includes(""+e)},submitButtonLabel:{type:String,default:"Submit"}},computed:{generatorModel(){return this.model},generatorSchema(){return this.schema},generatorErrors(){return this.errors},generatorId(){return this.builderId},builderId(){return t(this.id)},firstGlobalError(){return o(this.errors,0)?r(this.errors[0])?this.errors[0]:[]:o(this.errors,"0")&&r(this.errors[0])?this.errors[0]:[]}},methods:{onModelUpdate(e){this.$emit("update:model",e)},onSubmitBtnClick(){this.$emit("submit",{model:this.model})},onFormEnter(){this.$emit("submit",{model:this.model})}}});var _=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"form-builder",attrs:{id:e.builderId,autocomplete:e.autocomplete},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onFormEnter(t)}}},[r("form-generator-error",{staticClass:"form-builder__error",attrs:{slot:"error",errors:e.firstGlobalError},slot:"error"}),e._v(" "),r("form-generator",{staticClass:"form-builder__fields",attrs:{id:e.generatorId,model:e.generatorModel,schema:e.generatorSchema,errors:e.generatorErrors},on:{"update:model":e.onModelUpdate}}),e._v(" "),r("div",{staticClass:"form-builder__actions actions",class:"form-builder__actions--"+e.actionsAlign},[e._t("actions",[r("button",{staticClass:"actions__submit-btn form-btn",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.onSubmitBtnClick(t)}}},[e._v("\n        "+e._s(e.submitButtonLabel)+"\n      ")])])],2)],1)};_._withStripped=!0;const g=d({render:_,staticRenderFns:[]},void 0,h,"data-v-29d64eec",!1,void 0,!1,void 0,void 0,void 0);const y=e.extend({name:"FormGeneratorFormField",props:{className:{type:String,default:""}}});var b=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"form-generator-form-field",class:this.className},[this._t("default")],2)};b._withStripped=!0;const F=d({render:b,staticRenderFns:[]},void 0,y,"data-v-2c4b2a29",!1,void 0,!1,void 0,void 0,void 0);const C=e.extend({name:"FormGeneratorLabel",props:{forInput:{type:String,required:!0},label:{type:String,required:!0},required:{type:Boolean,default:!0}}});var S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.label?r("label",{staticClass:"form-generator-label",attrs:{for:e.forInput}},[e._v("\n  "+e._s(e.label)+" "),e.required?r("span",[e._v("*")]):e._e()]):e._e()};S._withStripped=!0;const G=d({render:S,staticRenderFns:[]},void 0,C,void 0,!1,void 0,!1,void 0,void 0,void 0);const E=e.extend({name:"FormGeneratorHelp",props:{help:{type:String,default:""}}});var $=function(){var e=this.$createElement,t=this._self._c||e;return this.help?t("div",{staticClass:"form-generator-help"},[this._v("\n  "+this._s(this.help)+"\n")]):this._e()};$._withStripped=!0;const k=d({render:$,staticRenderFns:[]},void 0,E,"data-v-6e3414dc",!1,void 0,!1,void 0,void 0,void 0);const x=e.extend({name:"FormGeneratorCheckbox",components:{FormGeneratorFormField:F,FormGeneratorLabel:G,FormGeneratorHelp:k,FormGeneratorError:v},props:{id:{type:String,required:!0},value:{type:Boolean,default:!1},errors:{type:Array,default:()=>[]},label:{type:String,default:""},text:{type:String,default:""},formGroupClassName:{type:String,default:""},placeholder:{type:String,default:""},help:{type:String,default:""},required:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},data:()=>({checked:!1}),watch:{value:{handler(e){this.checked=Boolean(e),this.setValue(this.checked)},immediate:!0}},methods:{onChange(e){const t=e.target;this.setValue(t.checked)},setValue(e){this.$emit("update:value",e),this.$emit("input",e)}}});var q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form-generator-form-field",{staticClass:"form-generator-checkbox",attrs:{"class-name":e.formGroupClassName}},[r("form-generator-label",{attrs:{"for-input":e.id,label:e.label,required:e.required}}),e._v(" "),r("label",{staticClass:"form-generator-checkbox__checkbox checkbox"},[r("input",{staticClass:"checkbox__input",attrs:{id:e.id,disabled:e.disabled,type:"checkbox",name:"isSubscribed"},domProps:{checked:e.checked},on:{change:e.onChange}}),e._v(" "),r("label",{staticClass:"checkbox__label",attrs:{for:e.id}},[e._v("\n      "+e._s(e.text)+"\n    ")])]),e._v(" "),r("form-generator-help",{attrs:{help:e.help}}),e._v(" "),r("form-generator-error",{attrs:{errors:e.errors}})],1)};q._withStripped=!0;const B=d({render:q,staticRenderFns:[]},void 0,x,"data-v-5fe465ed",!1,void 0,!1,void 0,void 0,void 0);const A=e.extend({name:"FormGeneratorCollection",components:{FormGenerator:c,FormGeneratorFormField:F,FormGeneratorLabel:G,FormGeneratorHelp:k},props:{id:{type:String,required:!0},value:{type:Array,required:!0},errors:{type:Array,default:()=>[]},schema:{type:Array,required:!0},label:{type:String,default:""},formGroupClassName:{type:String,default:""},help:{type:String,default:""},required:{type:Boolean,default:!0},isAddAllow:{type:Boolean,default:!1},addButtonLabel:{type:String,default:"Add new"},isDeleteAllowed:{type:Boolean,default:!1},deleteButtonLabel:{type:String,default:"Delete"}},methods:{getFormGeneratorId(e){return`${this.id}-${e}`},getFormGeneratorErrors(e){return a(this.errors,e,{})},updateValue(e){this.$emit("update:value",e),this.$emit("input",e)},onItemModelUpdate(e,t){const r=i(this.value);n(r,e,t),this.updateValue(r)},onDeleteButtonClick(e){const t=i(this.value);t.splice(e,1),this.updateValue(t)},onAddButtonClick(){const e=i(this.value),t={};Object.values(this.schema).forEach(e=>{n(t,e.path,e.params.default||"")}),e.push(t),this.updateValue(e)}}});var w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form-generator-form-field",{staticClass:"form-generator-collection",attrs:{"class-name":e.formGroupClassName}},[r("form-generator-label",{staticClass:"form-generator-collection__label",attrs:{"for-input":e.id,label:e.label,required:!1}}),e._v(" "),r("form-generator-help",{attrs:{help:e.help}}),e._v(" "),r("div",{staticClass:"form-generator-collection__items"},[e._l(e.value,(function(t,o){return r("div",{key:o,staticClass:"form-generator-collection__item collection-item"},[r("form-generator",{attrs:{id:e.getFormGeneratorId(o),model:t,schema:e.schema,errors:e.getFormGeneratorErrors(o)},on:{"update:model":function(t){return e.onItemModelUpdate(o,t)}}}),e._v(" "),e.isDeleteAllowed?r("div",{staticClass:"collection-item__actions"},[r("button",{staticClass:"form-generator-collection__btn btn-delete",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.onDeleteButtonClick(o)}}},[e._v("\n          "+e._s(e.deleteButtonLabel)+"\n        ")])]):e._e()],1)})),e._v(" "),e.isAddAllow?r("button",{staticClass:"form-generator-collection__btn btn-add",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.onAddButtonClick(t)}}},[e._v("\n      "+e._s(e.addButtonLabel)+"\n    ")]):e._e()],2)],1)};w._withStripped=!0;const N=d({render:w,staticRenderFns:[]},void 0,A,"data-v-010fa73b",!1,void 0,!1,void 0,void 0,void 0);const R=e.extend({name:"FormGeneratorDivider"});var I=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"form-generator-divider"})};I._withStripped=!0;const V=d({render:I,staticRenderFns:[]},void 0,R,"data-v-712d3dca",!1,void 0,!1,void 0,void 0,void 0);const L=e.extend({name:"FormGeneratorInput",components:{FormGeneratorFormField:F,FormGeneratorLabel:G,FormGeneratorHelp:k,FormGeneratorError:v},props:{id:{type:String,required:!0},value:{type:[String,Number],default:""},errors:{type:Array,default:()=>[]},type:{type:String,default:"text",validator:e=>["text","email","number","password"].includes(""+e)},label:{type:String,default:""},formGroupClassName:{type:String,default:""},placeholder:{type:String,default:""},help:{type:String,default:""},required:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autocomplete:{type:String,default:"on"}},methods:{onInput(e){const t=e.target;this.$emit("update:value",t.value),this.$emit("input",t.value)}}});var O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form-generator-form-field",{staticClass:"form-generator-text",attrs:{"class-name":e.formGroupClassName}},[r("form-generator-label",{attrs:{"for-input":e.id,label:e.label,required:e.required}}),e._v(" "),r("input",{staticClass:"form-generator-text__input",attrs:{id:e.id,type:e.type,placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autocomplete},domProps:{value:e.value},on:{input:e.onInput}}),e._v(" "),r("form-generator-help",{attrs:{help:e.help}}),e._v(" "),r("form-generator-error",{attrs:{errors:e.errors}})],1)};O._withStripped=!0;const D=d({render:O,staticRenderFns:[]},void 0,L,"data-v-22969bd9",!1,void 0,!1,void 0,void 0,void 0);const P=e.extend({name:"FormGeneratorRadio",components:{FormGeneratorFormField:F,FormGeneratorLabel:G,FormGeneratorHelp:k,FormGeneratorError:v},props:{id:{type:String,required:!0},value:{type:[String,Number],default:""},errors:{type:Array,default:()=>[]},label:{type:String,default:""},options:{type:Array,required:!0},formGroupClassName:{type:String,default:""},help:{type:String,default:""},required:{type:Boolean,default:!0},disabled:{type:Boolean,default:!0}},methods:{onChange(e){const t=e.target;this.$emit("update:value",t.value),this.$emit("input",t.value)}}});var H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form-generator-form-field",{staticClass:"form-generator-radio",attrs:{"class-name":e.formGroupClassName}},[r("form-generator-label",{attrs:{"for-input":e.id,label:e.label,required:e.required}}),e._v(" "),r("div",{staticClass:"radio-buttons"},e._l(e.options,(function(t){return r("label",{key:t.value,staticClass:"radio-button"},[r("input",{staticClass:"radio-button__input",attrs:{disabled:e.disabled,type:"radio"},domProps:{value:t.value,checked:t.value===e.value},on:{change:e.onChange}}),e._v(" "),r("span",{staticClass:"radio-button__title"},[e._v("\n        "+e._s(t.label)+"\n      ")])])})),0),e._v(" "),r("form-generator-help",{attrs:{help:e.help}}),e._v(" "),r("form-generator-error",{attrs:{errors:e.errors}})],1)};H._withStripped=!0;const U=d({render:H,staticRenderFns:[]},void 0,P,"data-v-95133d34",!1,void 0,!1,void 0,void 0,void 0);const j=e.extend({name:"FormGeneratorSelect",components:{FormGeneratorFormField:F,FormGeneratorLabel:G,FormGeneratorHelp:k,FormGeneratorError:v},props:{id:{type:String,required:!0},value:{type:[String,Number],default:""},errors:{type:Array,default:()=>[]},label:{type:String,default:""},options:{type:[Array,Function],required:!0},formGroupClassName:{type:String,default:""},placeholder:{type:String,default:"Please select"},help:{type:String,default:""},required:{type:Boolean,default:!0},disabled:{type:Boolean,default:!0}},data:()=>({selectOptions:[]}),computed:{computedValue:{get(){return this.value},set(e){this.$emit("update:value",e),this.$emit("change",e)}}},watch:{options:{async handler(e){this.selectOptions="function"==typeof e?await e():e},immediate:!0}}});var M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form-generator-form-field",{staticClass:"form-generator-select",attrs:{"class-name":e.formGroupClassName}},[r("form-generator-label",{attrs:{"for-input":e.id,label:e.label,required:e.required}}),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.computedValue,expression:"computedValue"}],staticClass:"form-generator-select__select",attrs:{disabled:e.disabled},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.computedValue=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[e._v("\n      "+e._s(e.placeholder)+"\n    ")]),e._v(" "),e._l(e.selectOptions,(function(t){return r("option",{key:t.value,domProps:{value:t.value}},[e._v("\n      "+e._s(t.label)+"\n    ")])}))],2),e._v(" "),r("form-generator-help",{attrs:{help:e.help}}),e._v(" "),r("form-generator-error",{attrs:{errors:e.errors}})],1)};M._withStripped=!0;const T=d({render:M,staticRenderFns:[]},void 0,j,"data-v-58aa72d2",!1,void 0,!1,void 0,void 0,void 0);const X=e.extend({name:"FormGeneratorTextarea",components:{FormGeneratorFormField:F,FormGeneratorLabel:G,FormGeneratorHelp:k,FormGeneratorError:v},props:{id:{type:String,required:!0},value:{type:[String,Number],default:""},errors:{type:Array,default:()=>[]},label:{type:String,default:""},formGroupClassName:{type:String,default:""},placeholder:{type:String,default:""},help:{type:String,default:""},required:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},methods:{onInput(e){const t=e.target;this.$emit("update:value",t.value),this.$emit("input",t.value)}}});var z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form-generator-form-field",{staticClass:"form-generator-textarea",attrs:{"class-name":e.formGroupClassName}},[r("form-generator-label",{attrs:{"for-input":e.id,label:e.label,required:e.required}}),e._v(" "),r("textarea",{staticClass:"form-generator-textarea__input",attrs:{id:e.id,placeholder:e.placeholder,readonly:e.readonly,disabled:e.disabled},domProps:{value:e.value},on:{input:e.onInput,keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}}}),e._v(" "),r("form-generator-help",{attrs:{help:e.help}}),e._v(" "),r("form-generator-error",{attrs:{errors:e.errors}})],1)};z._withStripped=!0;const J=d({render:z,staticRenderFns:[]},void 0,X,"data-v-63e0a1d9",!1,void 0,!1,void 0,void 0,void 0);function K(e,t=""){const o=new FormData;return s(e,(function(e,a){!function e(t,o,a,n=""){const i=n.length?`${n}[${o}]`:o;l(a)||r(a)?s(a,(r,o)=>{e(t,o,r,i)}):t.append(i,null!==a?""+a:"")}(o,a,e,t)})),o}export default g;export{g as FormBuilder,c as FormGenerator,B as FormGeneratorCheckbox,N as FormGeneratorCollection,V as FormGeneratorDivider,v as FormGeneratorError,F as FormGeneratorFormField,k as FormGeneratorHelp,D as FormGeneratorInput,G as FormGeneratorLabel,U as FormGeneratorRadio,T as FormGeneratorSelect,J as FormGeneratorTextarea,K as toFormData};
//# sourceMappingURL=vue-form-builder.min.js.map
